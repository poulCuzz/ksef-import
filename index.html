<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KSeF 2.0 - Import Faktur</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<div class="container">
    <div class="box">
        <h2>KSeF 2.0 - Import Faktur</h2>

        <!-- PRZE≈ÅƒÑCZNIK -->
        <div class="auth-method-switcher">
            <button type="button" class="method-btn active" data-method="token">üîë Token KSeF</button>
            <button type="button" class="method-btn" data-method="certificate">üîê Certyfikat .p12</button>
        </div>

        <form id="exportForm" enctype="multipart/form-data">
            <!-- Pole ukryte - metoda uwierzytelniania -->
            <input type="hidden" name="auth_method" id="auth_method" value="token">

            <div class="form-group">
                <label>≈örodowisko:</label>
                <select name="env" id="env">
                    <option value="demo">DEMO (api-demo.ksef.mf.gov.pl)</option>
                    <option value="test">TEST (api-test.ksef.mf.gov.pl)</option>
                </select>
            </div>

            <!-- FORMULARZ TOKENA (domy≈õlnie widoczny) -->
            <div id="token-form" class="auth-form active">
                <div class="form-group">
                    <label>Token KSeF:</label>
                    <input type="text" name="ksef_token" id="ksef_token" placeholder="Wklej sw√≥j token KSeF">
                </div>
            </div>

            <!-- FORMULARZ CERTYFIKATU .p12 (ukryty domy≈õlnie) -->
            <div id="certificate-form" class="auth-form">
                <div class="form-group cert-info">
                    <div class="cert-icon">üîê</div>
                    <div class="cert-details">
                        <strong>Certyfikat: AkceptujFaktury_pl.p12</strong>
                        <span class="cert-hint">Plik certyfikatu znajduje siƒô w folderze /certs/</span>
                    </div>
                </div>

                <div class="form-group">
                    <label>Has≈Ço do certyfikatu .p12:</label>
                    <input type="password" name="p12_password" id="p12_password" placeholder="Wpisz has≈Ço do pliku .p12">
                </div>
            </div>

            <div class="form-group">
                <label>NIP:</label>
                <input type="text" name="nip" id="nip" placeholder="NIP (10 cyfr)" required pattern="[0-9]{10}" maxlength="10">
            </div>

            <div class="form-group">
                <label>Typ podmiotu:</label>
                <select name="subject_type" id="subject_type">
                    <option value="Subject1">Subject1 (Sprzedawca)</option>
                    <option value="Subject2">Subject2 (Nabywca)</option>
                </select>
            </div>

            <div class="date-row">
                <div class="form-group">
                    <label>Data od:</label>
                    <input type="date" name="date_from" id="date_from" required>
                </div>
                <div class="form-group">
                    <label>Data do:</label>
                    <input type="date" name="date_to" id="date_to" required>
                </div>
            </div>

            <button type="submit" id="submitBtn">Importuj faktury</button>
        </form>

        <!-- Status Panel -->
        <div class="status-panel" id="statusPanel">
            <div class="status-header">
                <div class="spinner" id="spinner"></div>
                <div class="checkmark" id="checkmark" style="display:none;">‚úì</div>
                <div class="error-icon" id="errorIcon" style="display:none;">‚úï</div>
                <div class="warning-icon" id="warningIcon" style="display:none;">!</div>
                <div class="info-icon" id="infoIcon" style="display:none;">i</div>
                <span class="status-title" id="statusTitle">Przetwarzanie...</span>
            </div>
            <div class="status-message" id="statusMessage">≈ÅƒÖczenie z KSeF...</div>
            <div class="status-details" id="statusDetails"></div>
            <div class="progress-bar" id="progressBar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="attempt-counter" id="attemptCounter"></div>
            <!-- Suggestions (pokazuje siƒô przy b≈Çƒôdach) -->
            <div class="suggestions-list" id="suggestionsList" style="display:none;"></div>
            <div class="error-code" id="errorCode"></div>
            <!-- Download list (pokazuje siƒô gdy gotowe) -->
            <div class="download-list" id="downloadList" style="display:none;"></div>
        </div>
    </div>
</div>

<script src="app.js"></script>

</body>
</html>
